<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Beach Houses In Mayaro  </title>
  <meta name="description" content="Looking for cheap affordable beach houses in Mayaro Trinidad? We offer same day bookings for the best guest houses and resorts in Mayaro with beachfront stays near Mayaro Beach.">
  

  <!-- Favicons -->
  <link href="assets/img/MBH  Logo 2.webp" rel="icon">
  <link href="assets/img/MBH  Logo 2.webp" rel="apple-touch-icon">

  <!-- Preconnect to external domains -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://cdn.jsdelivr.net" rel="preconnect" crossorigin>

  <!-- Preload critical hero background image -->
  <link rel="preload" as="image" href="assets/img/Beach%20House%20Image.webp" type="image/webp" fetchpriority="high">

  <!-- Inline Critical CSS for immediate render -->
  <style>
    /* Critical Bootstrap grid & utilities */
    *,::after,::before{box-sizing:border-box}
    html{min-height:100%;width:100%;overflow-x:hidden;margin:0;padding:0}
    body{margin:0;padding:0;font-family:Roboto,sans-serif;font-size:1rem;font-weight:400;line-height:1.5;color:#212529;min-height:100%;width:100%;position:relative;-webkit-overflow-scrolling:touch}
    body::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;min-height:100vh;background:linear-gradient(rgba(0,0,0,0.3),rgba(0,0,0,0.3)),url('assets/img/Beach%20House%20Image.webp');background-size:cover;background-position:center top;background-repeat:repeat;z-index:-1}
    .container,.container-fluid{width:100%;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto}
    .row{display:flex;flex-wrap:wrap;margin-right:-15px;margin-left:-15px}
    .col-lg-10{position:relative;width:100%;padding-right:15px;padding-left:15px}
    @media (min-width:992px){.col-lg-10{flex:0 0 83.333333%;max-width:83.333333%}}
    .d-flex{display:flex!important}.align-items-center{align-items:center!important}.justify-content-center{justify-content:center!important}.justify-content-between{justify-content:space-between!important}
    .text-center{text-align:center!important}.position-relative{position:relative!important}.fixed-top{position:fixed;top:0;right:0;left:0;z-index:1030}
    .px-3{padding-left:1rem!important;padding-right:1rem!important}
    /* Critical custom styles - Header & Hero */
    .header{background:transparent!important;backdrop-filter:none!important;-webkit-backdrop-filter:none!important;padding:1rem 0!important;transition:all 0.3s ease;z-index:1030}
    .logo{text-decoration:none;display:flex;align-items:center}
    .site-logo{font-size:1rem!important;color:#fff!important;margin:0}
    .logo-img{height:100px!important;max-height:100px!important;width:auto;margin-left:10px}
    .site-title{font-size:3.6rem;font-weight:700;color:#fff;text-shadow:2px 2px 8px rgba(0,0,0,0.5);margin:0;text-align:center;white-space:nowrap;position:relative;left:20px}
    .navmenu{display:flex;padding:0;font-size:1rem}
    .navmenu ul{list-style:none;margin:0;padding:0;display:flex;gap:0}
    .navmenu li{position:relative;left:30px}
    .navmenu a{color:#000!important;text-decoration:none;font-weight:500;padding:18px 10px;display:flex;align-items:center;transition:color 0.3s}
    .navmenu li:last-child a{padding-right:0}
    .navmenu a.active,.navmenu a:hover{color:#24b7a4!important}
    .mobile-nav-toggle{display:none;font-size:28px;color:#fff;cursor:pointer;line-height:0;transition:0.5s;position:fixed;top:20px;right:20px;z-index:9999}
    .bi::before{display:inline-block;font-family:bootstrap-icons!important;font-style:normal;font-weight:400!important;font-variant:normal;text-transform:none;line-height:1;vertical-align:-.125em}
    .bi-list:before{content:"\f479"}
    .bi-x:before{content:"\f62a"}
    @media (max-width:1199px){
      .navmenu{position:fixed;top:0!important;left:-100%;bottom:0!important;right:0!important;width:100vw;height:100vh;min-height:100vh;background:rgba(0,0,0,0.98);padding:0;transition:left 0.3s ease;z-index:99999!important;display:flex!important;align-items:center;justify-content:center;overflow-y:auto}
      body.mobile-nav-active .navmenu{left:0!important}
      .navmenu ul{flex-direction:column;gap:2rem;align-items:center;justify-content:center;text-align:center;width:100%;position:relative;z-index:100000}
      .navmenu li{width:100%!important;text-align:center!important;position:static!important;left:0!important;display:flex!important;justify-content:center!important}
      .navmenu li:nth-child(5){width:100%!important;text-align:center!important;padding-left:0!important;display:flex!important;justify-content:center!important}
      .navmenu a{color:#fff!important;font-size:1.5rem;padding:10px 20px}
      .mobile-nav-toggle{display:block!important}
      .site-title{font-size:1rem!important;display:block!important;position:absolute!important;left:52%!important;transform:translateX(-40%)!important;white-space:nowrap!important}
    }
    #home{min-height:100vh;display:flex;align-items:center;justify-content:center;position:relative;padding:0;background:transparent!important}
    .main{background:transparent!important;min-height:100vh}
    .section{padding:60px 0}
    .transparent-background{background:transparent!important}
    .description-box{background:rgba(255,255,255,0.95);padding:2rem 2.5rem;border-radius:15px;box-shadow:0 10px 40px rgba(0,0,0,0.2);max-width:900px;margin:0 auto;position:relative;right:35px}
    .description-box p{font-size:1rem;line-height:1.6;color:#333;margin-bottom:1rem}
    .oval-button{display:inline-block;padding:20px 74px;margin-top:50px;position:relative;right:50px;background:#22ff4e;color:#fff;text-decoration:none;border-radius:50px;font-size:2rem;font-weight:600;transition:all 0.3s ease;box-shadow:0 5px 20px rgba(102,126,234,0.4)}
    @media (max-width:768px){.logo-img{height:50px!important;max-height:50px!important}.hero-title{font-size:1rem;left:52%;transform:translateX(-40%)}.description-box{padding:1.5rem;margin:1rem;right:0}.oval-button{right:0}}
  </style>

  <!-- Deferred CSS - Load after initial render -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="print" onload="this.media='all'">
  <link href="assets/css/main.css" rel="stylesheet" media="print" onload="this.media='all'">
  <link href="assets/css/custom.css" rel="stylesheet" media="print" onload="this.media='all'">

  <!-- Deferred CSS - Load after page render -->
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet" media="print" onload="this.media='all'">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" media="print" onload="this.media='all'">

  <!-- Fonts - Deferred with font-display swap -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900&display=swap" rel="stylesheet" media="print" onload="this.media='all'">

  <!-- Fallback for browsers without JS -->
  <noscript>
    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/css/main.css" rel="stylesheet">
    <link href="assets/css/custom.css" rel="stylesheet">
    <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
    <link href="assets/vendor/aos/aos.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900&display=swap" rel="stylesheet">
  </noscript>
</head>

<body class="index-page">

  <header id="header" class="header d-flex align-items-center px-3 fixed-top">
    <div></div>
    <div class="container-fluid position-relative d-flex align-items-center justify-content-between">

      <a href="#home" class="logo d-flex align-items-center">
        <div class="site-logo">MBH</div>
        <img src="assets/img/MBH  Logo 2.webp" alt="Beach Houses in Mayaro Logo" class="logo-img" width="100" height="100">
      </a>

      <h2 class="site-title">Beach Houses in Mayaro Cool</h2>

      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="#home" class="active">Home</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="#booking">Booking</a></li>
          <li><a href="#footer">Contact</a></li>
          <li><a href="blog.html">Blog</a></li>
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>

    </div>
  </header>

  <main class="main">

    <!-- Home Section -->
    <section id="home" class="section transparent-background">
      <div class="container" data-aos="fade-up">
        <div class="row justify-content-center">
          <div class="col-lg-10">

            <div class="description-box" data-aos="fade-up" data-aos-delay="200">

      

              <p>
                Experience authentic Caribbean living at our beach houses in Mayaro the village on Trinidad's beautiful east coast. 
                It's unique connection to the sea is woven into village lifeâ€”from traditional fishing to vibrant weekend 
                beach limes. Wake up to stunning sunrise views over Mayaro Bay, enjoy fresh local seafood, and immerse yourself in 
                genuine coastal accommodation that connects you with the rhythm of the Caribbean Sea.
              </p>
            </div>

            <div class="text-center" style="margin-top: 2rem;">
              <a href="#booking" class="oval-button">Book Now</a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- About Section -->
    <section id="about" class="section">
      <div class="container">
        
        <h2 class="section-header" data-aos="fade-up">About</h2>
        
        <!-- About Description -->
        <div class="about-description" data-aos="fade-up" data-aos-delay="100">
          <p>
            Welcome to Mayaro Beach Houses, your premier booking agency for east coast Trinidad beach houses and coastal accommodation 
            in the village of Mayaro. For over a decade, we've connected visitors with perfect beachfront rentals while supporting 
            our local the communities such as the Ortoire River.
          </p>
          <p>
            Our work with local property owners provide authentic Caribbean hospitality through guest houses and beach resorts in the community. By booking with us, 
            you support local families and contribute to the economic vitality of this coastal community, while enjoying affordable 
            stays just steps away from the beach.
          </p>
        </div>

        <!-- Features -->
        <div class="row gy-4">
          <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="100">
            <div class="feature-card">
              <i class="bi bi-calculator"></i>
              <h4>Free Quotation</h4>
              <p>Get instant, transparent pricing with no hidden fees. Honest quotes tailored to your dates and group size.</p>
            </div>
          </div>

          <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="200">
            <div class="feature-card">
              <i class="bi bi-calendar-check"></i>
              <h4>Same Day Booking</h4>
              <p>Last-minute plans? Our streamlined process lets you secure your beach house the same day, subject to availability.</p>
            </div>
          </div>

          <div class="col-lg-4 col-md-6" data-aos="fade-up" data-aos-delay="300">
            <div class="feature-card">
              <i class="bi bi-images"></i>
              <h4>Property Photos & Location Maps</h4>
              <p>Receive detailed photos of your beach house in Mayaro with pool or beachfront access and its Google Maps location </p>
            </div>
          </div>
        </div>

      </div>
    </section>

    <!-- Booking Section - Embedded into the SPA -->
    <section id="booking" class="section">
      <div class="container">
        
        <div class="booking-form-container" data-aos="fade-up">
          <h2 class="booking-title">Booking Info</h2>
          
          <form id="bookingForm">
            <!-- Contact Information Row -->
            <div class="row mb-4">
              <div class="col-md-6 mb-3 mb-md-0">
                <label for="fullName" class="form-label">Full Name:</label>
                <div class="input-group-icon">
                  <input type="text" class="form-control" id="fullName" name="fullName"
                         placeholder="e.g., John Smith" required>
                  <i class="bi bi-person"></i>
                </div>
              </div>
              
              <div class="col-md-6">
                <label for="email" class="form-label">Email:</label>
                <div class="input-group-icon">
                  <input type="email" class="form-control" id="email" name="email" 
                         placeholder="your.email@example.com" required>
                  <i class="bi bi-envelope"></i>
                </div>
              </div>
            </div>

            <!-- Booking Details Row -->
            <div class="row mb-4">
              <div class="col-md-4 mb-3 mb-md-0">
                <label for="checkIn" class="form-label">Check-in:</label>
                <div style="position: relative;">
                  <input type="text" class="form-control" id="checkIn" name="checkIn" 
                         placeholder="Select date" required readonly>
                  <i class="bi bi-calendar" style="position: absolute; right: 15px; top: 50%; transform: translateY(-50%); color: #667eea; pointer-events: none;"></i>
                </div>
              </div>
              
              <div class="col-md-4 mb-3 mb-md-0">
                <label for="checkOut" class="form-label">Check-out:</label>
                <div style="position: relative;">
                  <input type="text" class="form-control" id="checkOut" name="checkOut" 
                         placeholder="Select date" required readonly>
                  <i class="bi bi-calendar" style="position: absolute; right: 15px; top: 50%; transform: translateY(-50%); color: #667eea; pointer-events: none;"></i>
                </div>
              </div>
              
              <div class="col-md-4">
                <label for="guests" class="form-label">Guest:</label>
                <div class="input-group-icon">
                  <select class="form-select" id="guests" name="guests" required>
                    <option value="" selected disabled>Select guests</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="4">4</option>
                    <option value="5+">5+</option>
                    <option value="10+">10+</option>
                  </select>
                  <i class="bi bi-people"></i>
                </div>
              </div>
            </div>

            <!-- Submit Button -->
            <div class="row">
              <div class="col-12">
                <button type="submit" class="check-availability-btn">
                   Check for Booking
                </button>
              </div>
            </div>
          </form>
        </div>

      </div>
    </section>

  </main>

  <!-- Social Media Widget -->
  <div class="social-media-widget" data-aos="fade-left">
    <h6>Follow Us</h6>
    <div class="social-links-widget">
      <a href="#" class="facebook" aria-label="Follow us on Facebook"><i class="bi bi-facebook"></i></a>
      <a href="https://www.instagram.com/luxegetawaystt/" class="instagram" aria-label="Follow us on Instagram"><i class="bi bi-instagram"></i></a>
      <a href="https://api.whatsapp.com/send?phone=18687053853" class="whatsapp" aria-label="Contact us on WhatsApp"><i class="bi bi-whatsapp"></i></a>
    </div>
  </div>

  <footer id="footer" class="footer transparent-background">

    <div class="container">
      <div class="row gy-3">
        <div class="col-lg-3 col-md-6 d-flex">
          <i class="bi bi-geo-alt icon"></i>
          <div class="address">
            <h4>Location</h4>
            <p>Trinidad and Tobago</p>
          </div>

        </div>

        <div class="col-lg-3 col-md-6 d-flex">
          <i class="bi bi-telephone icon"></i>
          <div>
            <h4>Contact</h4>
            <p>
              <strong>Phone:</strong> <span>+1 868-4837589</span><br>
              <strong>Email:</strong> <span>beachhouesinmayaro@luxegetawaystt.com</span><br>
            </p>
          </div>
        </div>

        <div class="col-lg-3 col-md-6 d-flex">
          <i class="bi bi-clock icon"></i>
          <div>
            <h4>Support Hours</h4>
            <p>
              <strong>Mon-Sun:</strong> <span>24/7 Available</span><br>
              <strong>Response:</strong> <span>Within 2 hours</span>
            </p>
          </div>
        </div>

        <div class="col-lg-3 col-md-6">
          <h4>Follow Us</h4>
          <div class="social-links d-flex">
            <a href="#" class="twitter" aria-label="Follow us on Twitter"><i class="bi bi-twitter-x"></i></a>
            <a href="#" class="facebook" aria-label="Follow us on Facebook"><i class="bi bi-facebook"></i></a>
            <a href="https://www.instagram.com/luxegetawaystt/" class="instagram" aria-label="Follow us on Instagram"><i class="bi bi-instagram"></i></a>
            <a href="https://api.whatsapp.com/send?phone=18687053853" class="whatsapp" aria-label="Contact us on WhatsApp"><i class="bi bi-whatsapp"></i></a>
          </div>
        </div>

      </div>
    </div>

    <div class="container copyright text-center mt-4">
      <p>  <strong class="px-1 sitename">A Product of Luxe Business Solutions</strong> </p>

      <!-- TTNeTTwork Business Directory Badge -->
      <div class="mt-3">
        <a href="https://www.ttnettwork.com/diego-martin/%EF%BB%BFhidden-top-category/beach-houses-in-mayaro?from=badge" title="Find me on T&T Business Network (TTNeTTwork.com)" target="_blank">
          <img src="https://www.ttnettwork.com/images/memberbadge.png" alt="TTNeTTwork Member" style="border: none; max-width: 25px; height: auto;"/>
        </a>
      </div>
    </div>

  </footer>

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Preloader -->
  <div id="preloader"></div>

  <!-- Vendor JS Files - Deferred for performance -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js" defer></script>
  <script src="assets/vendor/php-email-form/validate.js" defer></script>
  <script src="assets/vendor/aos/aos.js" defer></script>

  <!-- Flatpickr JS - Deferred -->
  <script src="https://cdn.jsdelivr.net/npm/flatpickr" defer></script>

  <!-- Main JS File - Deferred -->
  <script src="assets/js/main.js" defer></script>

  <!-- Booking Configuration Data -->
  <script>
    // Global booking configuration with default values
    window.bookingConfig = {
      "country": "TT",  // Default fallback to Trinidad & Tobago
      "destination_area_id": "mayaro",
      "property_id": "",
      "channel": "website",
      "utm_source": "google",
      "utm_medium": "cpc",
      "utm_campaign": "mayaro-beach-houses"
    };

    // Detect visitor's country via IP geolocation
    async function detectCountry() {
      try {
        const response = await fetch('https://ipapi.co/json/', {
          method: 'GET',
          headers: {
            'Accept': 'application/json'
          }
        });

        if (response.ok) {
          const data = await response.json();
          window.bookingConfig.country = data.country_code || 'TT';
          console.log('Detected country:', window.bookingConfig.country, '|', data.country_name);
        } else {
          console.warn('Geolocation API response not OK, using default country: TT');
        }
      } catch (error) {
        console.warn('Geolocation detection failed, using default country: TT', error);
        // Keeps default 'TT'
      }
    }

    // Run country detection on page load
    detectCountry();
  </script>

  <!-- Request ID Generator for Idempotent Bookings -->
  <script>
    // ---- Frontend-safe request_id generator (idempotency key) ----

    const REQUEST_ID_STORAGE_KEY = "booking_request_id_v1";
    const REQUEST_ID_CREATED_AT_KEY = "booking_request_id_created_at_v1";

    // How long we keep the same request_id to survive refresh/retry (minutes)
    const REQUEST_ID_TTL_MINUTES = 30;

    function pad2(n) {
      return String(n).padStart(2, "0");
    }

    function yymmNowUTC() {
      const d = new Date();
      const yy = String(d.getUTCFullYear()).slice(-2);
      const mm = pad2(d.getUTCMonth() + 1);
      return yy + mm;
    }

    function timestampUTC() {
      // 20260103T142233Z
      const d = new Date();
      const YYYY = d.getUTCFullYear();
      const MM = pad2(d.getUTCMonth() + 1);
      const DD = pad2(d.getUTCDate());
      const hh = pad2(d.getUTCHours());
      const mm = pad2(d.getUTCMinutes());
      const ss = pad2(d.getUTCSeconds());
      return `${YYYY}${MM}${DD}T${hh}${mm}${ss}Z`;
    }

    function secureRandomHex(bytes = 16) {
      const arr = new Uint8Array(bytes);
      crypto.getRandomValues(arr);
      return Array.from(arr, b => b.toString(16).padStart(2, "0")).join("");
    }

    function generateRequestId(prefix = "BK") {
      const yymm = yymmNowUTC().trim();
      const ts = timestampUTC().trim();

      // Best: crypto.randomUUID (supported in modern browsers)
      let rand;
      if (crypto.randomUUID) {
        rand = crypto.randomUUID().replaceAll("-", "").trim();
      } else {
        // Fallback: secure random bytes
        rand = secureRandomHex(16).trim();
      }

      return `${prefix}_${yymm}_${ts}_${rand}`.trim();
    }

    function isExpired(createdAtMs) {
      const ageMs = Date.now() - createdAtMs;
      return ageMs > REQUEST_ID_TTL_MINUTES * 60 * 1000;
    }

    function getOrCreateRequestId() {
      const existing = localStorage.getItem(REQUEST_ID_STORAGE_KEY);
      const createdAtRaw = localStorage.getItem(REQUEST_ID_CREATED_AT_KEY);
      const createdAt = createdAtRaw ? Number(createdAtRaw) : 0;

      if (existing && createdAt && !isExpired(createdAt)) {
        return existing; // survive refresh/retry
      }

      const fresh = generateRequestId("BK");
      localStorage.setItem(REQUEST_ID_STORAGE_KEY, fresh);
      localStorage.setItem(REQUEST_ID_CREATED_AT_KEY, String(Date.now()));
      return fresh;
    }

    function clearRequestId() {
      localStorage.removeItem(REQUEST_ID_STORAGE_KEY);
      localStorage.removeItem(REQUEST_ID_CREATED_AT_KEY);
    }

    // Make available globally for booking form
    window.getOrCreateRequestId = getOrCreateRequestId;
    window.clearRequestId = clearRequestId;
  </script>

  <!-- Custom Booking Script - Must run after Flatpickr loads -->
  <script>
    console.log('ðŸš€ Booking script loaded!');
    console.log('Request ID functions available:', {
      getOrCreateRequestId: typeof window.getOrCreateRequestId,
      clearRequestId: typeof window.clearRequestId
    });

    // Wait for Flatpickr to load before initializing
    window.addEventListener('load', function() {
      console.log('âœ… Page fully loaded, initializing form...');

      // Initialize date pickers
      const today = new Date();
      const tomorrow = new Date(today);
      tomorrow.setDate(tomorrow.getDate() + 1);

      const checkInPicker = flatpickr("#checkIn", {
      minDate: "today",
      dateFormat: "Y-m-d",
      onChange: function(selectedDates, dateStr, instance) {
        if (selectedDates.length > 0) {
          const minCheckOut = new Date(selectedDates[0]);
          minCheckOut.setDate(minCheckOut.getDate() + 1);
          checkOutPicker.set('minDate', minCheckOut);
          
          const currentCheckOut = checkOutPicker.selectedDates[0];
          if (currentCheckOut && currentCheckOut <= selectedDates[0]) {
            checkOutPicker.clear();
          }
        }
      }
    });

    const checkOutPicker = flatpickr("#checkOut", {
      minDate: tomorrow,
      dateFormat: "Y-m-d"
    });

    // Handle form submission
    document.getElementById('bookingForm').addEventListener('submit', async function(e) {
      e.preventDefault();

      console.log('=== FORM SUBMITTED ===');
      console.log('getOrCreateRequestId exists?', typeof window.getOrCreateRequestId);

      const formData = {
        fullName: document.getElementById('fullName').value,
        email: document.getElementById('email').value,
        checkIn: document.getElementById('checkIn').value,
        checkOut: document.getElementById('checkOut').value,
        guests: document.getElementById('guests').value
      };

      // Calculate number of days
      const checkInDate = new Date(formData.checkIn);
      const checkOutDate = new Date(formData.checkOut);
      const Days = Math.ceil((checkOutDate - checkInDate) / (1000 * 60 * 60 * 24));

      // Add Days to formData
      formData.Days = Days;

      // Generate or retrieve idempotent request_id
      const requestId = window.getOrCreateRequestId().trim();

      // Merge with booking configuration data + request_id
      const bookingPayload = {
        request_id: requestId,
        ...formData,
        ...window.bookingConfig
      };

      // Debug: Log the payload being sent
      console.log('Sending booking payload:', bookingPayload);
      console.log('Request ID:', requestId);

      // Send data to n8n webhook
      try {
        const response = await fetch('https://n8n.cewd.space/webhook/e92c47ab-0e7d-4907-a2af-f337e02f900a', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(bookingPayload)
        });

        if (response.ok) {
          // Parse the response from n8n
          const result = await response.json();

          if (result.success === false && result.message === "Inquiry already exists") {
            // Duplicate inquiry detected
            alert(`Inquiry Already Exists!\n\nYour booking inquiry has already been submitted.\n\nRequest ID: ${result.request_id}\n\nWe'll contact you shortly regarding your original inquiry.`);

            // Don't clear request_id or reset form for duplicates
            // User might want to modify and resubmit
          } else {
            // Successful new submission
            // Clear request_id after successful submission
            window.clearRequestId();

            // Display success message
            alert(`Booking Request Submitted Successfully!\n\nName: ${formData.fullName}\nEmail: ${formData.email}\nCheck-in: ${formData.checkIn}\nCheck-out: ${formData.checkOut}\nDays: ${Days}\nGuests: ${formData.guests}\n\nThank you! We'll check availability and contact you shortly.`);

            // Reset form
            this.reset();
            checkInPicker.clear();
            checkOutPicker.clear();
          }
        } else {
          throw new Error('Submission failed');
        }
      } catch (error) {
        console.error('Error submitting booking:', error);
        alert('There was an error submitting your booking request. Please try again or contact us directly.');
      }
    });

    // Smooth scroll and active nav highlighting
    document.addEventListener('DOMContentLoaded', function() {
      const sections = document.querySelectorAll('section[id]');
      const navLinks = document.querySelectorAll('.navmenu a');

      function highlightNav() {
        let scrollY = window.pageYOffset;

        sections.forEach(section => {
          const sectionHeight = section.offsetHeight;
          const sectionTop = section.offsetTop - 100;
          const sectionId = section.getAttribute('id');

          if (scrollY > sectionTop && scrollY <= sectionTop + sectionHeight) {
            navLinks.forEach(link => {
              link.classList.remove('active');
              if (link.getAttribute('href') === `#${sectionId}`) {
                link.classList.add('active');
              }
            });
          }
        });
      }

      window.addEventListener('scroll', highlightNav);
    });
    }); // Close window.addEventListener('load')
  </script>

</body>

</html>
